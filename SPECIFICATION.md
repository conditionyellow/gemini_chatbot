# Gemini チャットボット プロジェクト仕様書

## プロジェクト概要
このプロジェクトは、Google Gemini APIを使用したAIチャットボットです。Live2Dキャラクター表示、音声読み上げ、定型文返信機能、キャラクターペルソナシステムを備えています。

## 主要機能

### 1. AIチャット機能
- Google Gemini APIとの統合
- リアルタイムでの会話
- チャット履歴の管理
- エラーハンドリング

### 2. Live2D キャラクター表示機能
- 複数のLive2Dモデルをサポート
- モデル選択機能（ドロップダウンメニュー）
- キャラクター情報パネル（右下表示）
  - **モデル名**: 現在選択されているキャラクターの名前
  - **ペルソナ概要**: キャラクターの性格や特徴
  - **得意分野**: そのキャラクターが専門とする領域

#### 対応キャラクター
- **ナトリ (Natori)**: 優しくて知的な女性。日常会話、学習サポート、心理カウンセリングが得意
- **マーク (Mark)**: クールで理論的な男性。技術相談、プログラミング、データ分析が専門
- **ヒヨリ (Hiyori)**: 明るく元気な女性。エンターテイメント、創作活動、趣味の相談が得意
- **ケイ (Kei)**: 落ち着いた大人の男性。ビジネス、キャリア、人生相談が専門
- **ミク (Miku)**: 人気のバーチャルシンガー。音楽、創作、技術トレンドが得意
- **シンプル (Simple)**: 基本的なデモ用キャラクター
- **イプシロン (Epsilon)**: 近未来的なキャラクター

### 3. キャラクターペルソナシステム ⭐ 新機能
選択されたLive2Dモデルに応じて、AIの返答スタイルと専門性が変化するシステムです。

#### キャラクター情報表示
- **位置**: Live2D表示エリアの右下
- **内容**: 
  - キャラクター名
  - 性格・ペルソナの概要
  - 得意分野のリスト
- **デザイン**: 半透明背景、ブラー効果、ホバーアニメーション

### 4. 定型文返信機能
特定のキーワードが含まれるメッセージに対して、AIに問い合わせることなく即座に定型文で返答する機能です。

#### 対応カテゴリ
1. **挨拶系**: おはよう、こんにちは、こんばんは、ありがとう、さよなら、はじめまして
2. **質問系**: 時間、日付、天気、名前
3. **システム関連**: ヘルプ、機能、使い方、コマンド
4. **感情・反応系**: すごい、面白い、つまらない、疲れた、眠い、楽しい
5. **特定の話題**: 猫、犬、音楽、本、映画、ゲーム
6. **トラブルシューティング**: エラー、動かない、バグ、重い
7. **学習・教育系**: 勉強、宿題、テスト
8. **日常会話**: 食事、仕事、休み、買い物

### 5. 音声読み上げ機能
- Web Speech API (SpeechSynthesis) を使用
- 日本語での音声読み上げ
- ボットの返答を自動で読み上げ

### 6. レスポンシブデザイン
- PC・モバイル対応
- 現代的なUI/UX
- フレックスボックスレイアウト

## 技術仕様

### フロントエンド
- HTML5、CSS3、Vanilla JavaScript
- PIXI.js (Live2D表示用)
- Live2D Cubism SDK
- Web Speech API

### バックエンド
- Google Cloud Functions (Proxy Server)
- Google Gemini API

### デプロイメント
- ローカル開発: Python HTTP Server (port 8001)
- 本番環境: 静的ホスティング対応

## ファイル構成

```
gemini_chatbot/
├── index.html          # メインHTML
├── style.css           # スタイルシート
├── script.js           # メインJavaScript
├── SPECIFICATION.md    # 本仕様書
├── models/             # Live2Dモデル
│   └── live2d/
│       ├── natori_pro/
│       ├── mark/
│       ├── hiyori/
│       ├── kei/
│       ├── miku/
│       ├── simple/
│       └── Epsilon/
├── SDK/                # Live2D SDK
└── libs/               # ライブラリ
    └── pixi-live2d-display-master/
```

## UI レイアウト

### Live2D表示エリア
- **左上**: モデル選択ドロップダウン
- **右下**: キャラクター情報パネル
  - キャラクター名（太字、大きめフォント）
  - ペルソナ概要（イタリック、中サイズフォント）  
  - 得意分野（小さめフォント、背景色付き）

### チャットエリア
- メッセージ履歴表示
- ユーザー入力欄
- 送信ボタン

## 使用方法

### 基本的な使い方
1. Live2Dモデルを選択（左上のドロップダウン）
2. 選択したキャラクターの情報を右下で確認
3. メッセージを入力欄に入力
4. Enterキーまたは送信ボタンをクリック
5. 選択したキャラクターのペルソナに基づいて返答

### キャラクター切り替え
- ドロップダウンメニューから別のキャラクターを選択
- 選択と同時にキャラクター情報パネルが更新
- 以降の会話は新しいキャラクターのペルソナで進行

### 開発者向け機能
- ブラウザの開発者コンソールで `chatbotUtils` オブジェクトを使用
- 定型文の動的追加・削除・一覧表示が可能

## 最新の更新

### キャラクター情報表示機能の実装
- Live2D表示エリアの右下にキャラクター情報パネルを配置
- モデル名、ペルソナ概要、得意分野を表示
- 半透明背景とブラー効果でモダンなデザイン
- ホバー時のアニメーション効果

### ペルソナシステムの強化
- 各キャラクターの詳細な設定（性格、専門分野、話し方）
- キャラクター切り替え時の自動更新
- 視覚的にわかりやすい情報表示

## 今後の予定
- Live2Dモデルアニメーションの改善
- キャラクター間の会話システム
- ユーザー設定の保存機能
- モバイル対応の最適化